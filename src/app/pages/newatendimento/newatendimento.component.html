<app-menu></app-menu>

<div class="container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Primeira Consulta</mat-card-title>
      <mat-card-subtitle>Dados completos do paciente</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="consultaForm" (ngSubmit)="onSubmit()">
        <!-- Seção 1: Dados Antropométricos -->
        <mat-card class="section-card">
          <mat-card-header>
            <mat-card-title>1. Dados Antropométricos e Percepção do Peso</mat-card-title>
          </mat-card-header>
          
          <mat-card-content>
            <div class="row">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Peso Atual (kg)</mat-label>
                <input matInput type="number" step="0.1" formControlName="pesoAtual" required>
              </mat-form-field>

              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Peso Habitual (kg)</mat-label>
                <input matInput type="number" step="0.1" formControlName="pesoHabitual">
              </mat-form-field>
            </div>

            <!--perda de peso-->
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>Teve perda de peso recente?</mat-panel-title>
              </mat-expansion-panel-header>
              
              <div formGroupName="perdaPeso">
                <mat-slide-toggle formControlName="teve">Sim</mat-slide-toggle>
                
                <div *ngIf="consultaForm.get('perdaPeso.teve')?.value" class="expansion-content">
                  <div class="row">
                    <mat-form-field appearance="outline">
                      <mat-label>Em quanto tempo?</mat-label>
                      <input matInput formControlName="tempo">
                    </mat-form-field>

                    <mat-form-field appearance="outline">
                      <mat-label>Quantos quilos perdeu?</mat-label>
                      <input matInput type="number" step="0.1" formControlName="quantidade">
                    </mat-form-field>
                  </div>

                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Motivo da perda</mat-label>
                    <textarea matInput formControlName="motivo" rows="2"></textarea>
                  </mat-form-field>
                </div>
              </div>
            </mat-expansion-panel>

            <!--Ganho de peso-->
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                  <mat-panel-title>Teve ganho de peso recente?</mat-panel-title>
                </mat-expansion-panel-header>
                
                <div formGroupName="ganhoPeso">
                  <mat-slide-toggle formControlName="teve">Sim</mat-slide-toggle>
                  
                  <div *ngIf="consultaForm.get('ganhoPeso.teve')?.value" class="expansion-content">
                    <div class="row">
                      <mat-form-field appearance="outline">
                        <mat-label>Em quanto tempo?</mat-label>
                        <input matInput formControlName="tempo">
                      </mat-form-field>
  
                      <mat-form-field appearance="outline">
                        <mat-label>Quantos quilos ganhou?</mat-label>
                        <input matInput type="number" step="0.1" formControlName="quantidade">
                      </mat-form-field>
                    </div>
  
                    <mat-form-field appearance="outline" class="full-width">
                      <mat-label>Motivo do ganho</mat-label>
                      <textarea matInput formControlName="motivo" rows="2"></textarea>
                    </mat-form-field>
                  </div>
                </div>
              </mat-expansion-panel>

          </mat-card-content>
        </mat-card>

        <!-- Seção 2: Padrão Alimentar -->
        <mat-card class="section-card">
            <mat-card-header>
              <mat-card-title>2. Padrão Alimentar</mat-card-title>
            </mat-card-header>
          
            <mat-card-content>
              <div class="row">
                <mat-form-field appearance="outline">
                  <mat-label>Quantas refeições por dia?</mat-label>
                  <input matInput type="number" formControlName="refeicoesPorDia">
                </mat-form-field>
          
                <mat-form-field appearance="outline">
                  <mat-label>Onde costuma se alimentar?</mat-label>
                  <input matInput formControlName="localAlimentacao">
                </mat-form-field>
              </div>
          
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Em que horários?</mat-label>
                <textarea matInput formControlName="horariosAlimentacao" rows="2"></textarea>
              </mat-form-field>
          
              <div class="row">
                <mat-form-field appearance="outline">
                  <mat-label>Costuma comer sozinho(a) ou acompanhado(a)?</mat-label>
                  <input matInput formControlName="companhiaRefeicoes">
                </mat-form-field>
          
                <mat-form-field appearance="outline">
                  <mat-label>Duração de cada refeição?</mat-label>
                  <input matInput formControlName="duracaoRefeicoes">
                </mat-form-field>
              </div>
          
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Como você percebe sua saciedade nas refeições? Sente-se satisfeito(a)?</mat-label>
                <textarea matInput formControlName="percepcaoSaciedade" rows="2"></textarea>
              </mat-form-field>
          
              <div class="row">
                <mat-form-field appearance="outline">
                  <mat-label>Quem prepara suas refeições?</mat-label>
                  <input matInput formControlName="preparadorRefeicoes">
                </mat-form-field>
          
                <mat-form-field appearance="outline">
                  <mat-label>Forma de preparo mais comum</mat-label>
                  <input matInput formControlName="formaPreparoComum">
                </mat-form-field>
              </div>
          
              <div class="row">
                <mat-form-field appearance="outline">
                  <mat-label>Quem faz as compras da casa?</mat-label>
                  <input matInput formControlName="responsavelCompras">
                </mat-form-field>
          
                <mat-form-field appearance="outline">
                  <mat-label>Frequência de compras</mat-label>
                  <input matInput formControlName="frequenciaCompras">
                </mat-form-field>
              </div>
          
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Como está seu apetite atualmente?</mat-label>
                <textarea matInput formControlName="apetiteAtual" rows="2"></textarea>
              </mat-form-field>
          
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Preferências alimentares</mat-label>
                <textarea matInput formControlName="preferenciasAlimentares" rows="2"></textarea>
              </mat-form-field>
          
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Alimentos rejeitados ou evitados</mat-label>
                <textarea matInput formControlName="alimentosRejeitados" rows="2"></textarea>
              </mat-form-field>
          
            </mat-card-content>
          </mat-card>

        <!-- Seção 3: Comportamento Alimentar -->
        <mat-card class="section-card">
          <mat-card-header>
            <mat-card-title>3. Comportamento Alimentar e Rotina</mat-card-title>
          </mat-card-header>
          
          <mat-card-content>
            <!-- Campos da seção 3 -->
            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Em quais situações você percebe que há mudança no seu hábito alimentar?</mat-label>
                <textarea matInput formControlName="mudancasHabitoAlimentar" rows="2"></textarea>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
                <mat-label>O que costuma mudar nos fins de semana, feriados ou nas férias?</mat-label>
                <textarea matInput formControlName="mudancasFinaisSemana" rows="2"></textarea>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Como é sua ingestão de líquidos? Quais líquidos costuma consumir? Em que quantidade e com qual frequência (horário)?</mat-label>
                <textarea matInput formControlName="ingestaoLiquidos" rows="2"></textarea>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Você prefere alimentos doces ou salgados?</mat-label>
                <textarea matInput formControlName="preferenciaSabor" rows="2"></textarea>
            </mat-form-field>
          
            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Costuma consumir alimentos light ou diet?</mat-label>
                <textarea matInput formControlName="alimentosLightDiet" rows="2"></textarea>
            </mat-form-field>

            
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                  <mat-panel-title>Usa algum tipo de suplemento?</mat-panel-title>
                </mat-expansion-panel-header>
          
                <div formGroupName="usoSuplementos">
                  <mat-slide-toggle formControlName="usa">Sim</mat-slide-toggle>
          
                  <div *ngIf="consultaForm.get('usoSuplementos.usa')?.value" class="expansion-content">
                    <mat-form-field appearance="outline" class="full-width">
                      <mat-label>Qual?</mat-label>
                      <input matInput formControlName="quais">
                    </mat-form-field>
          
                    <mat-form-field appearance="outline" class="full-width">
                      <mat-label>Quem indicou o uso?</mat-label>
                      <input matInput formControlName="indicacao">
                    </mat-form-field>
                  </div>
                </div>
            </mat-expansion-panel>
        </mat-card-content>
        </mat-card>

        <!--Seção 4-->
        <mat-card class="section-card">
          <mat-card-header>
            <mat-card-title>4. Motivações e Estilo de Vida</mat-card-title>
          </mat-card-header>
        
          <mat-card-content>
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Qual o motivo da sua consulta hoje?</mat-label>
              <input matInput formControlName="motivoConsulta">
            </mat-form-field>
        
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Qual é a sua profissão ou ocupação?</mat-label>
              <input matInput formControlName="profissao">
            </mat-form-field>
        
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Onde você trabalha?</mat-label>
              <input matInput formControlName="localTrabalho">
            </mat-form-field>
        
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Carga horária semanal</mat-label>
              <input matInput formControlName="cargaHoraria">
            </mat-form-field>
        
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Meio de locomoção utilizado</mat-label>
              <input matInput formControlName="meioLocomocao">
            </mat-form-field>
        
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Escolaridade</mat-label>
              <input matInput formControlName="escolaridade">
            </mat-form-field>
        
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Estado civil</mat-label>
              <input matInput formControlName="estadoCivil">
            </mat-form-field>
        
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Composição do domicílio</mat-label>
              <input matInput formControlName="composicaoDomicilio">
            </mat-form-field>
        
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Horas de sono por noite</mat-label>
              <input matInput formControlName="horasSono">
            </mat-form-field>
        
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Qualidade do sono</mat-label>
              <input matInput formControlName="qualidadeSono">
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Você tem algum lazer?</mat-label>
              <input matInput formControlName="lazer">
            </mat-form-field>
        
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>Pratica atividade física?</mat-panel-title>
              </mat-expansion-panel-header>
        
              <div formGroupName="atividadeFisica">
                <mat-slide-toggle formControlName="pratica">Sim</mat-slide-toggle>
        
                <div *ngIf="consultaForm.get('atividadeFisica.pratica')?.value">
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Frequência</mat-label>
                    <input matInput formControlName="frequencia">
                  </mat-form-field>
        
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Intensidade</mat-label>
                    <input matInput formControlName="intensidade">
                  </mat-form-field>
        
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Duração</mat-label>
                    <input matInput formControlName="duracao">
                  </mat-form-field>
                </div>
              </div>
            </mat-expansion-panel>
        
            
          </mat-card-content>
        </mat-card>

        <!-- Seção 5: Aspectos Clínicos -->
        <mat-card class="section-card">
          <mat-card-header>
            <mat-card-title>5. Aspectos Clínicos</mat-card-title>
          </mat-card-header>
        
          <mat-card-content>
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Possui alguma religião que exige restrições alimentares?</mat-label>
              <input matInput formControlName="restricoesReligiosas">
            </mat-form-field>
        
            <!-- Álcool -->
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>Consumo de álcool</mat-panel-title>
              </mat-expansion-panel-header>
        
              <div formGroupName="alcool">
                <mat-slide-toggle formControlName="usa">Consome?</mat-slide-toggle>
        
                <div *ngIf="consultaForm.get('alcool.usa')?.value">
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Tempo</mat-label>
                    <input matInput formControlName="tempo">
                  </mat-form-field>
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Frequência</mat-label>
                    <input matInput formControlName="frequencia">
                  </mat-form-field>
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Tipo</mat-label>
                    <input matInput formControlName="tipo">
                  </mat-form-field>
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Quantidade</mat-label>
                    <input matInput formControlName="quantidade">
                  </mat-form-field>
                </div>
              </div>
            </mat-expansion-panel>
        
            <!-- Fumo -->
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>Fuma?</mat-panel-title>
              </mat-expansion-panel-header>
        
              <div formGroupName="fumo">
                <mat-slide-toggle formControlName="fuma">Sim</mat-slide-toggle>
        
                <div *ngIf="consultaForm.get('fumo.fuma')?.value">
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Tempo</mat-label>
                    <input matInput formControlName="tempo">
                  </mat-form-field>
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Frequência</mat-label>
                    <input matInput formControlName="frequencia">
                  </mat-form-field>
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Tipo</mat-label>
                    <input matInput formControlName="tipo">
                  </mat-form-field>
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Quantidade</mat-label>
                    <input matInput formControlName="quantidade">
                  </mat-form-field>
                </div>
              </div>
            </mat-expansion-panel>
        
            <!-- Drogas -->
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>Uso de drogas ilícitas</mat-panel-title>
              </mat-expansion-panel-header>
        
              <div formGroupName="drogas">
                <mat-slide-toggle formControlName="usa">Usa?</mat-slide-toggle>
        
                <div *ngIf="consultaForm.get('drogas.usa')?.value">
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Tempo</mat-label>
                    <input matInput formControlName="tempo">
                  </mat-form-field>
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Frequência</mat-label>
                    <input matInput formControlName="frequencia">
                  </mat-form-field>
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Tipo</mat-label>
                    <input matInput formControlName="tipo">
                  </mat-form-field>
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Quantidade</mat-label>
                    <input matInput formControlName="quantidade">
                  </mat-form-field>
                </div>
              </div>
            </mat-expansion-panel>
          </mat-card-content>
        </mat-card>

        <!-- Seção 6: Avaliação por Sistemas -->
<mat-card class="section-card">
  <mat-card-header>
    <mat-card-title>6. Avaliação por Sistemas</mat-card-title>
  </mat-card-header>

  <mat-card-content>
    <!-- Sistema Neurológico -->
    <div formGroupName="sistemaNeurologico">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Cognição</mat-label>
        <input matInput formControlName="cognicao">
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Estado emocional</mat-label>
        <input matInput formControlName="emocional">
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Autonomia</mat-label>
        <input matInput formControlName="autonomia">
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Comunicação</mat-label>
        <input matInput formControlName="comunicacao">
      </mat-form-field>
    </div>

    <!-- Sistema Digestório -->
    <div formGroupName="sistemaDigestorio">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Dentição</mat-label>
        <input matInput formControlName="dentição">
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Deglutição</mat-label>
        <input matInput formControlName="degluticao">
      </mat-form-field>

      <mat-slide-toggle formControlName="dorEngolir">Sente dor ao engolir?</mat-slide-toggle>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Digestão</mat-label>
        <input matInput formControlName="digestao">
      </mat-form-field>

      <div formGroupName="evacuacao">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Frequência da evacuação</mat-label>
          <input matInput formControlName="frequencia">
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Consistência</mat-label>
          <input matInput formControlName="consistencia">
        </mat-form-field>
      </div>
    </div>

    <!-- Sistema Urinário -->
    <div formGroupName="sistemaUrinario">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Frequência urinária</mat-label>
        <input matInput formControlName="frequencia">
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Coloração</mat-label>
        <input matInput formControlName="coloracao">
      </mat-form-field>

      <mat-slide-toggle formControlName="sangue">Presença de sangue</mat-slide-toggle>
      <mat-slide-toggle formControlName="incontinencia">Incontinência</mat-slide-toggle>
      <mat-slide-toggle formControlName="edema">Edema</mat-slide-toggle>
    </div>

    <!-- Sistema Reprodutor -->
<div formGroupName="sistemaReprodutor">
  <mat-slide-toggle formControlName="menstruacaoRegular">Menstruação regular</mat-slide-toggle>
  <mat-slide-toggle formControlName="tpm">Sinais de TPM</mat-slide-toggle>
  <mat-slide-toggle formControlName="amenorreia">Amenorreia</mat-slide-toggle>
  <mat-slide-toggle formControlName="menopausa">Menopausa</mat-slide-toggle>

  <!-- Observações TPM -->
  <mat-form-field appearance="outline" class="full-width" *ngIf="consultaForm.get('sistemaReprodutor.tpm')?.value">
    <mat-label>Observações sobre TPM (ex: sintomas, duração, etc)</mat-label>
    <input matInput formControlName="observacaoTpm">
  </mat-form-field>
  
  <!-- Idade de Início da Menopausa -->
  <mat-form-field appearance="outline" class="full-width" *ngIf="consultaForm.get('sistemaReprodutor.menopausa')?.value">
    <mat-label>Idade de início da menopausa</mat-label>
    <input matInput type="number" formControlName="idadeInicioMenopausa">
  </mat-form-field>

  <mat-form-field appearance="outline" class="full-width">
    <mat-label>Partos</mat-label>
    <input matInput formControlName="partos">
  </mat-form-field>
</div>
  </mat-card-content>
</mat-card>

<div class="button-container">
  <button mat-raised-button color="warn" type="button" (click)="cancelar()">
    Cancelar
  </button>
  <button mat-raised-button color="primary" type="submit" [disabled]="loading">
    <span *ngIf="!loading">Salvar Consulta</span>
    <mat-spinner *ngIf="loading" diameter="20"></mat-spinner>
  </button>
</div>